---
title: "Idempotent Requests"
---

The API supports [idempotency](https://en.wikipedia.org/wiki/Idempotence) for safely retrying requests without accidentally performing the same operation twice. This is useful when an API call is disrupted in transit and you do not receive a response. For example, if a request to sent event does not respond due to a network connection error, you can retry the request with the same idempotency key to guarantee that no more than one event is sent.

Idempotency is supported in these API's:

1. [send-event](/api-reference/send-event)
2. [send-event-bulk](/api-reference/send-event-bulk)

To perform an idempotent request, provide an additional `Idempotency-Key` header to the request.

```bash curl
curl 'https://api.ravenapp.dev/v1/apps/{{app_id}}/events/send' \
-H 'Authorization: AuthKey {{api_key}}' \
-H 'Content-Type: application/json' \
-H 'Idempotency-Key: W1zY2lhdXNuamxxamR3b3d' \
-d '{
	"event": "test",
    "user" : {
      "mobile" : "+919876543210"
    },
    "data" : {
      "customer_name" : "Doodle",
      "client_name" : "John",
      "order_amount" : "123"
    }
}'
```

Raven's idempotency works by saving the resulting status code and body of the first request made for any given idempotency key, regardless of whether it succeeded or failed. Subsequent requests with the same key return the same result, including 500 errors.

An idempotency key is a unique value generated by the client which the server uses to recognize subsequent retries of the same request. How you create unique keys is up to you, but we suggest using V4 UUIDs, or another random string with enough entropy to avoid collisions. Idempotency keys can be up to 255 characters long.

Keys are eligible to be removed from the system automatically after they're at least 24 hours old, and a new request is generated if a key is reused after the original has been pruned. The idempotency layer compares incoming parameters to those of the original request and errors unless they're the same to prevent accidental misuse.

Results are only saved if an API endpoint started executing. If incoming parameters failed validation, or the request conflicted with another that was executing concurrently, no idempotent result is saved because no API endpoint began execution. It is safe to retry these requests.

All POST requests accept idempotency keys. Sending idempotency keys in `GET` and `DELETE` requests have no effect and should be avoided, as these requests are idempotent by definition.
